# 注释规范

根据情况注释代码，尽可能通过清晰的代码结构和命名减少注释的需要。

以下三种情况尽可能的标注好。
用于标记待办事项（TODO）、需要修复的缺陷（FIXME）或其他临时解决方案（HACK）。

## 描述

### 1. 概述
- **清晰性**：注释应清晰、简洁、直接。
- **准确性**：注释内容必须准确反映代码的意图和行为。
- **及时更新**：代码修改时，相关注释也应相应更新。

### 2. 代码文档注释
- **包注释**：每个包应有一个包注释，位于包声明之前的一个或多个连续注释中。
- **函数注释**：每个公开（exported）函数都应有一个注释，用来说明函数的功能和用法。
- **类型和变量注释**：公开的结构体、接口、类型别名、全局变量都应有注释。
- **Godoc**：注释应兼容 Godoc 工具，使用完整的句子和适当的标点。

### 3. 内联注释
- **代码解释**：对复杂的代码逻辑、算法或不直观的代码块进行说明。
- **临时注释**：用于标记待办事项（TODO）、需要修复的缺陷（FIXME）或其他临时解决方案（HACK）。

### 4. 注释格式
- **单行注释**：使用 `//` 开始，位于被注释代码的上方或同一行的右侧。
- **多行注释**：使用 `/* ... */`，通常用于包注释或长的代码说明。

### 5. 特殊注释标签
- **TODO**：标记未来要完成的工作或待优化的代码。
- **FIXME**：指出需要修复或重构的代码部分。
- **HACK**：标识临时解决方案或待改进的代码。
- **DEPRECATED**：用于标记不推荐使用的旧代码或功能。

### 6. 避免的行为
- **冗余注释**：不要对明显的代码添加注释。
- **过时的注释**：确保注释与代码同步更新。
- **注释掉的代码**：避免保留被注释掉的旧代码，除非有特别说明。

### 7. 其他考虑
- **代码自解释原则**：尽可能通过清晰的代码结构和命名减少注释的需要。
- **国际化**：考虑到团队成员的语言习惯，注释可以使用英语或团队内通用的其他语言。
- **特定场景注释**：根据项目或团队的特定需求，可能需要额外的注释规则，如性能说明、安全性说明等。

## godoc使用

- go get golang.org/x/tools/cmd/godoc
- 代码当前路径执行godoc -http=:6060
- 127.0.0.1:6060本地查看

### 注释规范
`Godoc` 是 Go 语言的文档生成工具，它从源代码中提取注释来生成文档。为了确保你的 Go 代码能够生成清晰、有用的文档，需要遵循一定的注释规范。这些规范包括：

#### 1. 包注释
- **位置**：放在包声明之前的一个或多个连续注释块中。
- **目的**：描述整个包的功能和用途。
- **格式**：通常使用块注释（`/* ... */`），但也可以使用连续的单行注释（`//`）。

#### 2. 导出（Exported）标识符注释
- **目标**：所有公开的（即首字母大写的）函数、类型、变量、常量和方法。
- **位置**：紧跟在声明之前。
- **格式**：单行或多行注释（`//`），以被注释对象的名称开头，紧跟一个空格和描述内容。

#### 3. 函数和方法注释
- **内容**：简明扼要地说明函数或方法做什么，包括任何重要的细节或行为。
- **参数和返回值**：如果不是显而易见的，应该描述参数的意义和返回值。

#### 4. 类型注释
- **内容**：描述类型的用途，以及如何使用该类型。
- **对于结构体**：还应该说明其各个字段的用途。

#### 5. 变量和常量注释
- **内容**：说明变量或常量的用途和重要性。

#### 6. 注释格式
- **句子形式**：使用完整的句子，包括适当的标点符号。
- **文档段落**：段落之间用空行分隔。

#### 7. 示例代码
- **用途**：为了更好地说明如何使用 API，可以提供示例代码。
- **格式**：放在特定的 `Example` 函数中，Godoc 将自动提取并显示这些示例。

## 注释示例

```go
// Package calculator 提供基本的数学计算功能。
// 该包主要包含基础数学运算，如加法、减法、乘法和除法。
// 它旨在提供一个简单、易用的数学库。
package calculator

import "fmt"

// Number 定义了数学运算中使用的数字类型。
// 该类型目前基于 float64 实现，未来可能会根据需要调整为更复杂的实现。
type Number float64

// Add 函数实现了两个数字的加法运算。
// 它接受两个 Number 类型的参数，并返回它们的和。
//
// 参数:
//   a - 第一个加数
//   b - 第二个加数
//
// 返回值:
//   两个加数的和
//
// 示例:
//   result := Add(1.5, 2.5) // result == 4.0
func Add(a, b Number) Number {
    return a + b
}

// Subtract 函数实现了两个数字的减法运算。
// 注意：在使用时需考虑浮点数的精度问题。
//
// 参数:
//   a - 被减数
//   b - 减数
//
// 返回值:
//   两数相减的结果
//
// 示例:
//   result := Subtract(5.5, 3.0) // result == 2.5
func Subtract(a, b Number) Number {
    return a - b
}

// multiply 实现了内部的乘法逻辑，目前未公开。
// TODO: 考虑是否需要将此函数导出。
func multiply(a, b Number) Number {
    // FIXME: 需要处理乘法中的溢出问题
    return a * b
}

// Divide 函数实现了两个数字的除法运算。
// 注意：除数不能为 0，否则会引发 panic。
//
// 参数:
//   a - 被除数
//   b - 除数
//
// 返回值:
//   两数相除的结果
//
// 错误处理:
//   如果除数为 0，函数会 panic
//
// 示例:
//   result := Divide(10.0, 2.0) // result == 5.0
func Divide(a, b Number) Number {
    if b == 0 {
        panic("除数不能为 0")
    }
    return a / b
}

// 未来可能会添加更多数学运算函数，如平方根、指数等。
// HACK: 目前的错误处理策略较为简单，未来可能会引入更复杂的处理机制。

```